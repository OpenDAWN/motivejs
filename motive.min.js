(function(){"use strict";var e=[{value:0,natural:"C",flat:null,sharp:"B#",dblflat:"Dbb",dblsharp:null,common:"C"},{value:1,natural:null,flat:"Db",sharp:"C#",dblflat:null,dblsharp:"Bx",common:"C#"},{value:2,natural:"D",flat:null,sharp:null,dblflat:"Ebb",dblsharp:"Cx",common:"D"},{value:3,natural:null,flat:"Eb",sharp:"D#",dblflat:"Fbb",dblsharp:null,common:"Eb"},{value:4,natural:"E",flat:"Fb",sharp:null,dblflat:null,dblsharp:"Dx",common:"E"},{value:5,natural:"F",flat:null,sharp:"E#",dblflat:"Gbb",dblsharp:null,common:"F"},{value:6,natural:null,flat:"Gb",sharp:"F#",dblflat:null,dblsharp:"Ex",common:"F#"},{value:7,natural:"G",flat:null,sharp:null,dblflat:"Abb",dblsharp:"Fx",common:"G"},{value:8,natural:null,flat:"Ab",sharp:"G#",dblflat:null,dblsharp:null,common:"Ab"},{value:9,natural:"A",flat:null,sharp:null,dblflat:"Bbb",dblsharp:"Gx",common:"A"},{value:10,natural:null,flat:"Bb",sharp:"A#",dblflat:"Cbb",dblsharp:null,common:"Bb"},{value:11,natural:"B",flat:"Cb",sharp:null,dblflat:null,dblsharp:"Ax",common:"B"}],a=[{name:"C",value:60},{name:"D",value:62},{name:"E",value:64},{name:"F",value:65},{name:"G",value:67},{name:"A",value:69},{name:"B",value:71}],t=[{name:"b",value:-1},{name:"#",value:1},{name:"bb",value:-2},{name:"x",value:2}],n=[{fifths:0,major:"C",minor:"A"},{fifths:1,major:"G",minor:"E"},{fifths:-1,major:"F",minor:"D"},{fifths:2,major:"D",minor:"B"},{fifths:-2,major:"Bb",minor:"G"},{fifths:3,major:"A",minor:"F#"},{fifths:-3,major:"Eb",minor:"C"},{fifths:4,major:"E",minor:"C#"},{fifths:-4,major:"Ab",minor:"F"},{fifths:5,major:"B",minor:"G#"},{fifths:-5,major:"Db",minor:"Bb"},{fifths:6,major:"F#",minor:"D#"},{fifths:-6,major:"Gb",minor:"Eb"},{fifths:7,major:"C#",minor:"A#"},{fifths:-7,major:"Cb",minor:"Ab"}],s=[{name:"m2",semitones:1,steps:1},{name:"M2",semitones:2,steps:1},{name:"m3",semitones:3,steps:2},{name:"M3",semitones:4,steps:2},{name:"P4",semitones:5,steps:3},{name:"A4",semitones:6,steps:3},{name:"d5",semitones:6,steps:4},{name:"P5",semitones:7,steps:4},{name:"m6",semitones:8,steps:5},{name:"M6",semitones:9,steps:5},{name:"m7",semitones:10,steps:6},{name:"M7",semitones:11,steps:6}],m=[{name:"U",semitones:0,steps:0},{name:"m2",semitones:1,steps:1},{name:"M2",semitones:2,steps:1},{name:"A2",semitones:3,steps:1},{name:"d3",semitones:2,steps:2},{name:"m3",semitones:3,steps:2},{name:"M3",semitones:4,steps:2},{name:"d4",semitones:4,steps:3},{name:"P4",semitones:5,steps:3},{name:"A4",semitones:6,steps:3},{name:"d5",semitones:6,steps:4},{name:"P5",semitones:7,steps:4},{name:"A5",semitones:8,steps:4},{name:"m6",semitones:8,steps:5},{name:"M6",semitones:9,steps:5},{name:"A6",semitones:10,steps:5},{name:"d7",semitones:9,steps:6},{name:"m7",semitones:10,steps:6},{name:"M7",semitones:11,steps:6},{name:"P8",semitones:12,steps:7},{name:"m9",semitones:13,steps:8},{name:"M9",semitones:14,steps:8},{name:"A9",semitones:15,steps:8},{name:"d11",semitones:16,steps:10},{name:"P11",semitones:17,steps:10},{name:"A11",semitones:18,steps:10},{name:"m13",semitones:20,steps:12},{name:"M13",semitones:21,steps:12},{name:"A13",semitones:22,steps:12}],r=[{name:"major",intervals:["R","M2","M3","P4","P5","M6","M7"],pattern:[2,2,1,2,2,2,1]},{name:"minor",intervals:["R","M2","m3","P4","P5","m6","m7"],pattern:[2,1,2,2,1,2,2],source:["major","up","m3"]},{name:"major pentatonic",intervals:["R","M2","M3","P5","M6"],pattern:[2,2,3,2,3]},{name:"minor pentatonic",intervals:["R","m3","P4","P5","m7"],pattern:[3,2,2,3,2],source:["major pentatonic","up","m3"]},{name:"ionian",intervals:["R","M2","M3","P4","P5","M6","M7"],pattern:[2,2,1,2,2,2,1]},{name:"dorian",intervals:["R","M2","m3","P4","P5","M6","m7"],pattern:[2,1,2,2,2,1,2],source:["major","down","M2"]},{name:"phrygian",intervals:["R","m2","m3","P4","P5","m6","m7"],pattern:[1,2,2,2,1,2,2],source:["major","down","M3"]},{name:"lydian",intervals:["R","M2","M3","A4","P5","M6","M7"],pattern:[2,2,2,1,2,2,1],source:["major","down","P4"]},{name:"mixolydian",intervals:["R","M2","M3","P4","P5","M6","m7"],pattern:[2,2,1,2,2,1,2],source:["major","up","P4"]},{name:"aeolian",intervals:["R","M2","m3","P4","P5","m6","m7"],pattern:[2,1,2,2,1,2,2],source:["major","up","m3"]},{name:"locrian",intervals:["R","m2","m3","P4","d5","m6","m7"],pattern:[1,2,2,1,2,2,2],source:["major","up","m2"]},{name:"melodic minor",intervals:["R","M2","m3","P4","P5","M6","M7"],pattern:[2,1,2,2,2,2,1]},{name:"dorian b2",intervals:["R","m2","m3","P4","P5","M6","m7"],pattern:[1,2,2,2,2,1,2],source:["melodic minor","down","M2"]},{name:"lydian #5",intervals:["R","M2","M3","A4","A5","M6","M7"],pattern:[2,2,2,2,1,2,1],source:["melodic minor","down","m3"]},{name:"lydian dominant",intervals:["R","M2","M3","A4","P5","M6","m7"],pattern:[2,2,2,1,2,1,2],source:["melodic minor","down","P4"]},{name:"mixolydian b6",intervals:["R","M2","M3","P4","P5","m6","m7"],pattern:[2,2,1,2,1,2,2],source:["melodic minor","up","P4"]},{name:"aeolian b5",intervals:["R","M2","m3","P4","d5","m6","m7"],pattern:[2,1,2,1,2,2,2],source:["melodic minor","up","m3"]},{name:"altered",intervals:["R","m2","m3","d4","d5","m6","m7"],pattern:[1,2,1,2,2,2,2],source:["melodic minor","up","m2"]},{name:"harmonic minor",intervals:["R","M2","m3","P4","P5","m6","M7"],pattern:[2,1,2,2,1,3,1]},{name:"diminished",intervals:["R","M2","m3","P4","d5","m6","M6","M7"],pattern:[2,1,2,1,2,1,2,1]},{name:"half-whole diminished",intervals:["R","m2","m3","M3","A4","P5","M6","m7"],pattern:[1,2,1,2,1,2,1,2]},{name:"whole-half diminished",intervals:["R","M2","m3","P4","d5","m6","M6","M7"],pattern:[2,1,2,1,2,1,2,1]},{name:"whole tone",intervals:["R","M2","M3","A4","A5","m7"],pattern:[2,2,2,2,2,2]}],o=function(e,n,s){if("U"===s||"R"===s)return e;if("up"!==n&&"down"!==n)return e;var r=e.replace(/([A-G]).*/,"$1"),o=e.replace(/[A-G](.*)/,"$1"),l=0;if(o)for(var i=0;t.length>i;i++)if(o===t[i].name){l=t[i].value;break}for(var h,p,u=0;a.length>u;u++)if(r===a[u].name){h=u,p=(a[u].value+l)%12;break}for(var c,f,b=0;m.length>b;b++)if(s===m[b].name){c=m[b].semitones,f=m[b].steps;break}var v,d;switch(n){case"up":v=(h+f)%7,d=(p+c)%12;break;case"down":v=(7+(h-f))%7,d=(12+(p-c))%12}if(d===(12+a[v].value)%12)return a[v].name;for(var M=0;t.length>M;M++)if(d===(12+a[v].value+t[M].value)%12)return a[v].name+t[M].name},l=function(e){var a;return e.match(/13/)?a=e.replace(/13/,"6"):e.match(/11/)?a=e.replace(/11/,"4"):e.match(/9/)&&(a=e.replace(/9/,"2")),a?a:e},i=function(e){var a=["R"];return"5"===e||e.match(/sus/)||(e.match(/m(?:[1-9]|m)/)||e.match(/min/)||e.match(/dim/)||"m"===e?a.push("m3"):a.push("M3")),e.match(/sus2/)?a.push("M2"):e.match(/sus/)&&a.push("P4"),e.match(/(\+4|#4)/)&&a.push("A4"),e.match(/(\-5|b5)/)||e.match(/dim/)?a.push("d5"):e.match(/(\+5|#5)/)||e.match(/aug/)?a.push("A5"):a.push("P5"),("6"===e||"m6"===e||"6/9"===e||"m6/9"===e)&&a.push("M6"),e.match(/dim7/)?a.push("d7"):e.match(/(m7|min7)/)?a.push("m7"):e.match(/(maj7|maj9|maj11|maj13)/)?a.push("M7"):e.match(/(7|9|11|13)/)&&"6/9"!==e&&"m6/9"!==e&&a.push("m7"),e.match(/(\-9|b9)/)?a.push("m9"):e.match(/(\+9|#9)/)?a.push("A9"):e.match(/(9|11|13)/)&&a.push("M9"),e.match(/(\-11|b11)/)?a.push("d11"):e.match(/(\+11|#11)/)?a.push("A11"):e.match(/(11|13)/)&&a.push("P11"),e.match(/(\-13|b13)/)?a.push("m13"):e.match(/(\+13|#13)/)?a.push("A13"):e.match(/13/)&&a.push("M13"),a},h=function(e,a){try{for(var t=[],n=[],s=0;a.length>s;s++)"R"===a[s]?n.push(e):n.push(o(e,"up",a[s]));for(var m=0;n.length>m;m++)t.push(n[m]);return t}catch(r){console.log(r)}},p=function(e,a){var t,n,r={};return e?(n=Math.floor(Math.random()*s.length),t=s[n]):(n=Math.floor(Math.random()*m.length),t=m[n]),r.semitones=t.semitones,r.steps=t.steps,r.name=a?l(t.name):t.name,r},u=function(){var a={},t=Math.floor(Math.random()*e.length);if(a.value=e[t].value,a.natural=e[t].natural,a.flat=e[t].flat,a.sharp=e[t].sharp,a.dblflat=e[t].dblflat,a.dblsharp=e[t].dblsharp,a.common=e[t].common,e[t].natural)a.name=e[t].natural;else{var n=Math.round(Math.random());a.name=n?e[t].flat:e[t].sharp}return a},c={version:"0.1.0",primitives:{pitch_classes:e,steps:a,operators:t,keys:n,intervals:m,scales:r},transpose:o,random:{interval:p,pitch_class:u}};c.Note=function(n){if(!n)return console.log("you must specify a note name or midi number"),void 0;switch(typeof n){case"string":try{var s=n.replace(/([A-G])(?:bb|x|b|#)?([0-9])?/g,"$1");if(!s)return console.log("Note name must begin with a capital letter [A-G]."),void 0;var m=n.replace(/(?:[A-G])((?:bb|x|b|#)?)([0-9])?/g,"$1"),r=parseInt(n.replace(/([A-G](?:bb|x|b|#)?)([0-9])?/g,"$2"),10);if(r){for(var o=0,l=0;t.length>l;l++)if(t[l].name===m){o=t[l].value;break}this.kind="pitch",this.octave=r,this.step=s,this.accidental=m;for(var i,h=0;a.length>h;h++)a[h].name===s&&(i=12*r+12+a[h].value%12+o);if(!i)return console.log("could not calculate midi note number, check octave value"),void 0;var p=i%12;this.midi=i,this.pitch_class=e[p],this.frequency=440*Math.pow(2,(i-69)/12),this.pitch_name=s+m,this.scientific=s+m+r}else{this.kind="pitch-class",this.step=s,this.accidental=m;for(var u,c=0;a.length>c;c++)a[c].name===s&&(u=a[c].value);for(var o=0,f=0;t.length>f;f++)if(t[f].name===m){o=t[f].value;break}var p=(u+o)%12;this.pitch_class=e[p],this.pitch_name=s+m}}catch(b){console.log(b)}break;case"number":try{for(var v,p=n%12,d=n-p,r=d/12-1,M=0;e.length>M;M++)if(e[M].value===p){v=e[M];break}var g=v.common,s=g.replace(/([A-G])(?:bb|x|b|#)?/,"$1"),m=g.replace(/(?:[A-G])((?:bb|x|b|#)?)/,"$1");this.pitch_class=v,this.scientific=g+r,this.midi=n,this.kind="pitch",this.step=s,this.accidental=m,this.octave=r,this.pitch_name=g,this.frequency=440*Math.pow(2,(n-69)/12)}catch(b){console.log(b)}}return this},c.Note.prototype.transpose=function(e,t){switch(this.kind){case"pitch-class":var n=this.pitch_name,s=o(n,e,t);return new c.Note(s);case"pitch":for(var r,l=0;a.length>l;l++)if(a[l].name===this.step){r=l;break}for(var i,s=o(this.pitch_name,e,t),l=0;m.length>l;l++)if(m[l].name===t){i=m[l].steps;break}var h=0;switch(e){case"up":h=r+i>=2*a.length?2:r+i>=a.length?1:0;break;case"down":h=0-a.length>r-i?-2:0>r-i?-1:0}var p=parseInt(this.octave,10)+h;return new c.Note(s+(""+p))}},c.Chord=function(e){e.match(/^([A-G](?:bb|x|b|#)?)(.*)/)||console.log("invalid root");var a=e.replace(/([A-G](?:bb|x|b|#)?)(.*)/g,"$1"),t=e.replace(/([A-G](?:bb|x|b|#)?)(.*)/g,"$2");this.root=a,this.formula=t;for(var n=i(t),s=[],m=0;n.length>m;m++)s.push(l(n[m]));for(var r=h(a,s),o=[],p=0;r.length>p;p++)o.push(new c.Note(r[p]));return this.note_members=o,this.interval_members=n,this.scale_members=s,this.full_name=a+t,this},c.Chord.prototype.transpose=function(e,a){var t=this.root,n=o(t,e,a);return new c.Chord(n+this.formula)},c.Scale=function(e){if(!e)return console.log("no scale name specified"),void 0;if("string"==typeof e){var a=/([A-G](?:bb|x|b|#)?)\s(.*)/;if(!e.match(a))return console.log("scale name was not formatted correctly"),void 0;var t=e.replace(a,"$1"),n=e.replace(a,"$2");this.root=t,this.formula=n;for(var s,m=0;r.length>m;m++)if(r[m].name===n){s=r[m];break}if(!s)return console.log("scale name did not match any known scales"),void 0;this.matched=s;for(var o=h(t,s.intervals),l=[],m=0;o.length>m;m++)l.push(new c.Note(o[m]));return this.note_members=l,this.interval_members=s.intervals,this}return console.log("scale name must be a string"),void 0};try{module.exports=c}catch(f){window.Motive=c}})();