!function(a){if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.motive=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){b.exports={name:"motive",description:"JavaScript music theory library",version:"0.1.2",homepage:"http://jshanley.github.io/motivejs/",author:{name:"John Shanley",url:"https://github.com/jshanley"},repository:{type:"git",url:"https://github.com/jshanley/motivejs.git"},bugs:{url:"https://github.com/jshanley/motivejs/issues"},licenses:[{type:"MIT",url:"https://github.com/jshanley/motivejs/blob/master/LICENSE-MIT"}],main:"index.js",engines:{node:">= 0.8.0"},scripts:{test:"grunt test"},devDependencies:{grunt:"^0.4.2","grunt-contrib-jshint":"~0.6.0","grunt-contrib-nodeunit":"~0.3.2","grunt-contrib-watch":"~0.5.1","grunt-contrib-uglify":"~0.4.0",browserify:"~3.32.1","grunt-browserify":"~1.3.1"}}},{}],2:[function(a,b){b.exports=function(){var a={five:["R","P5"],maj:["R","M3","P5"],min:["R","m3","P5"],aug:["R","M3","A5"],dim:["R","m3","d5"],sus2:["R","M2","P5"],sus4:["R","P4","P5"]},b={nine:["M9"],eleven:["M9","P11"],thirteen:["M9","P11","M13"]},c=/^(maj|min|mmin|m|aug|dim|alt|sus|\-)?((?:\d+)|(?:6\/9))?$/;return function(d){if(d in a)return a[d];if(""===d)return a.maj;if("5"===d)return a.five;if("m"===d||"-"===d)return a.min;if("sus"===d)return a.sus4;var e=[],f=c.exec(d),g=f[1]?f[1]:"",h=f[2]?f[2]:"";switch(g){case"":e="6/9"===h?e.concat(a.maj,["M6","M9"]):e.concat(a.maj,"6"===h?"M6":"m7");break;case"maj":e=e.concat(a.maj,"6"===h?"M6":"M7");break;case"min":case"m":case"-":e=e.concat(a.min,"6"===h?"M6":"m7");break;case"aug":e=e.concat(a.aug,"6"===h?"M6":"m7");break;case"dim":e=e.concat(a.dim,"d7");break;case"mmaj":e=e.concat(a.min,"M7")}switch(h){case"9":e=e.concat(b.nine);break;case"11":e=e.concat(b.eleven);break;case"13":e=e.concat(b.thirteen)}return e}}()},{}],3:[function(a,b){function c(a){var b=d(a).parse();if(!b)throw new Error("Invalid chord name.");var c=g(b.species),f=h(c,b.alterations);this.name=a,this.type="chord",this.root=e(b.root),this.formula=b.species+b.alterations,this.isSlash="/"===b.slash?!0:!1,this.bass=this.isSlash?e(b.bass):this.root,this.intervals=f,this.notes=i(this.intervals,this.root)}var d=a("../regex/validation/chord_name"),e=a("../note/note"),f=a("../utilities/transpose"),g=a("./get_species_intervals"),h=a("../palette/apply_alterations"),i=a("../palette/get_notes_from_interval_array");c.prototype.transpose=function(a,b){return new c(f(this.root,a,b).name+this.formula)},b.exports=function(a){return new c(a)}},{"../note/note":11,"../palette/apply_alterations":12,"../palette/get_notes_from_interval_array":13,"../regex/validation/chord_name":22,"../utilities/transpose":26,"./get_species_intervals":2}],4:[function(a,b){function c(a){if(!a)return 0;for(var b=0,c=0;c<a.length;c++)b+=d[a[c]];return b}var d=a("../primitives/operators");b.exports=c},{"../primitives/operators":18}],5:[function(a,b){function c(a){if("undefined"==typeof a)throw new Error("Cannot convert alter to accidental, none given.");if(0===a||null===a)return"";for(var b="";0>a;)b+="b",a+=1;for(;a>1;)b+="x",a+=-2;for(;a>0;)b+="#",a+=-1;return b}b.exports=c},{}],6:[function(a,b){b.exports=function(a){return 440*Math.pow(2,(a-69)/12)}},{}],7:[function(a,b){function c(a,b,c,d){var e=0,g=a.slice(0,1);switch(g){case"P":case"M":break;case"m":e-=1;break;case"A":e+=1;break;case"d":e-="M"===d?2:1}for(var h=0;h<a.slice(1).length;h++)"d"===a.slice(1)[h]?e-=1:"A"===a.slice(1)[h]&&(e+=1);return f[b-1]+e+12*c}function d(a){return 1===a||4===a||5===a?"P":"M"}var e=a("../regex/validation/interval_name"),f=[0,2,4,5,7,9,11],g=function(a){var b=e(a).parse();if(!b)throw new Error("Invalid interval name.");this.steps=b.size-1;var f=b.size>7?this.steps%7+1:b.size;return this.name=a,this.type="interval",this.quality=b.quality,this.size=b.size,this.normalized=this.quality+f.toString(10),this.species=d(f),this.octaves=Math.floor(this.size/7.001),this.semitones=c(this.quality,f,this.octaves,this.species),this};b.exports=function(a){return new g(a)}},{"../regex/validation/interval_name":23}],8:[function(a,b){var c=a("./modulo").modulo,d=function(a){return this.array=a,this.size=a.length,this};d.prototype.indexOf=function(a){return this.array.indexOf(a)},d.prototype.atIndex=function(a){return a=c(a,this.size),this.array[a]},b.exports=d},{"./modulo":9}],9:[function(a,b){function c(a,b){return a>=0?a%b:(a%b+b)%b}function d(a){return c(a,7)}function e(a){return c(a,12)}b.exports={modulo:c,mod7:d,mod12:e}},{}],10:[function(a,b){b.exports={version:a("../package.json").version,note:a("./note/note"),chord:a("./chord/jazz"),interval:a("./interval/interval"),palette:a("./palette/palette")}},{"../package.json":1,"./chord/jazz":3,"./interval/interval":7,"./note/note":11,"./palette/palette":14}],11:[function(a,b){function c(a){var b;if("string"==typeof a)b=a;else{if("number"!=typeof a)throw new TypeError("Note name must be a string or number.");b=e.atIndex(a)}var c=d(b).parse();if(!c)throw new Error("Invalid note name.");return this.name=b,this.type="note",this.pitchClass=e.indexOf(c.step+c.accidental),this.parts={step:c.step,accidental:c.accidental},null!==c.octave&&(this.name=c.step+c.accidental,this.type="pitch",this.octave=c.octave,this.scientific=b,this.midi=e.indexOf(this.scientific),this.frequency=h(this.midi)),this}var d=a("../regex/validation/note_name"),e=a("../primitives/pitch_names"),f=a("../primitives/fifths"),g=a("../primitives/intervals"),h=a("../convert/mtof"),i=a("../utilities/transpose"),j=function(a){return"string"==typeof a?new c(a):a};c.prototype.isEquivalent=function(a){return a=j(a),this.name!==a.name?!1:"pitch"===this.type&&"pitch"===a.type&&this.octave!==a.octave?!1:!0},c.prototype.isEnharmonic=function(a){return a=j(a),this.pitchClass!==a.pitchClass?!1:"pitch"===this.type&&"pitch"===a.type&&Math.abs(this.midi-a.midi)>11?!1:!0},c.prototype.setOctave=function(a){if("number"!=typeof a)throw new TypeError("Octave must be a number.");this.octave=a,this.scientific=this.name+a.toString(10),this.midi=e.indexOf(this.scientific),this.frequency=h(this.midi),this.type="pitch"},c.prototype.transpose=function(a,b){return new c(i("pitch"===this.type?this.scientific:this.name,a,b))},c.prototype.intervalTo=function(a){return a=j(a),g.atIndex(f.indexOf(a.name)-f.indexOf(this.name))},c.prototype.intervalFrom=function(a){return a=j(a),g.atIndex(f.indexOf(this.name)-f.indexOf(a.name))},c.prototype.up=function(a){return this.transpose("up",a)},c.prototype.down=function(a){return this.transpose("down",a)},c.prototype.toString=function(){return this.name},b.exports=function(a){return new c(a)}},{"../convert/mtof":6,"../primitives/fifths":16,"../primitives/intervals":17,"../primitives/pitch_names":19,"../regex/validation/note_name":24,"../utilities/transpose":26}],12:[function(a,b){var c=a("../regex/split_string_by_pattern"),d=a("./parsed_interval_array");b.exports=function(){function a(a){var b=8>a?a:a%7;return 1===b||4===b||5===b?"P"+a.toString(10):"M"+a.toString(10)}var b=/^(?:(?:add|sus|no)(?:\d+)|(?:sus|alt)|(?:n|b|\#|\+|\-)(?:\d+))/,e=function(a){var b=/(?:n|b|\#|\+|\-)(?:\d+)/;if(!b.test(a))return!1;var c=a.slice(0,1),d=a.slice(1);return"+"===c&&(c="#"),"-"===c&&(c="b"),"#"===c?"A"+d:"b"===c?"5"===d||"11"===d||"4"===d?"d"+d:"m"+d:"n"===c?"5"===d||"11"===d||"4"===d?"P"+d:"M"+d:void 0},f=function(a){return/sus/.test(a)?"susX":/add/.test(a)?"addX":/no/.test(a)?"noX":/alt/.test(a)?"alt":"binary"};return function(g,h){for(var i=new d(g),j=c(h,b),k=0;k<j.length;k++){var l=j[k];switch(f(l)){case"binary":var m=e(l);i.update(m);break;case"susX":i.remove(3),i.add("P4");break;case"addX":var n=parseInt(l.slice(3),10);i.add(a(n));break;case"noX":var o=parseInt(l.slice(2),10);i.remove(o);break;case"alt":i.update("d5"),i.add("A5"),i.update("m9"),i.add("A9"),i.update("m13")}}return i.unparse()}}()},{"../regex/split_string_by_pattern":21,"./parsed_interval_array":15}],13:[function(a,b){b.exports=function(){return function(a,b){for(var c=[],d=0;d<a.length;d++)c.push("R"===a[d]?b:b.transpose("up",a[d]));return c}}()},{}],14:[function(a,b){function c(a){this.notes=[],this.type="palette","undefined"!=typeof a&&this.add(a)}c.prototype.add=function(a){if("note"===a.type)return void this.notes.push(a);if("chord"!==a.type);else for(var b=0;b<a.notes.length;b++){for(var c=!1,d=0;d<this.notes.length;d++)if(this.notes[d].isEquivalent(a.notes[b])){c=!0;break}c||this.notes.push(a.notes[b])}},b.exports=function(a){return new c(a)}},{}],15:[function(a,b){function c(a,b){var c=["d","m","P","M","A"];return a.size<b.size?-1:a.size>b.size?1:c.indexOf(a.quality)<c.indexOf(b.quality)?-1:c.indexOf(a.quality)>c.indexOf(b.quality)?1:0}function d(a){this.array=[];for(var b=0;b<a.length;b++)this.array.push("R"===a[b]?{quality:"P",size:1}:e(a[b]).parse())}var e=a("../regex/validation/interval_name");d.prototype.sort=function(){return this.array.sort(c)},d.prototype.add=function(a){for(var b=e(a).parse(),c=0;c<this.array.length;c++)if(this.array[c].size===b.size&&this.array[c].quality===b.quality)return;this.array.push(b),this.sort()},d.prototype.remove=function(a){for(var b=7>=a?a+7:a-7,c=[],d=0;d<this.array.length;d++)this.array[d].size!==a&&this.array[d].size!==b&&c.push(this.array[d]);this.array=c},d.prototype.update=function(a){var b=e(a).parse();this.remove(b.size),this.array.push(b),this.sort()},d.prototype.unparse=function(){this.sort();for(var a=[],b=0;b<this.array.length;b++){var c=this.array[b].quality+this.array[b].size;a.push("P1"===c?"R":c)}return a},b.exports=d},{"../regex/validation/interval_name":23}],16:[function(a,b){var c=a("../math/circle"),d=a("../math/modulo"),e=a("../convert/alter_to_accidental"),f=a("../convert/accidental_to_alter"),g=new c(["F","C","G","D","A","E","B"]);g.indexOf=function(a){var b=a[0],c=a.slice(1),d=f(c),e=this.array.indexOf(b);return e+=this.size*d},g.atIndex=function(a){var b=Math.floor(a/this.array.length),c=e(b);return a=d.modulo(a,this.size),this.array[a]+c},b.exports=g},{"../convert/accidental_to_alter":4,"../convert/alter_to_accidental":5,"../math/circle":8,"../math/modulo":9}],17:[function(a,b){var c=a("../math/circle"),d=a("../math/modulo"),e=a("../regex/validation/interval_name"),f=new c([4,1,5,2,6,3,7]);f.indexOf=function(a){var b=e(a).parse();if(!b)throw new Error("Invalid interval name.");var c=b.quality,f=b.size;f="U"===f?1:parseInt(f,10),f=7>=f?f:d.modulo(f,this.size);var g,h,i,j=this.array.indexOf(f)-1;return"P"===c||"M"===c?g=j:"m"===c?g=j-this.size:c.match(/A+/)?(h=c.match(/A+/)[0].length,g=j+this.size*h):c.match(/d+/)&&(i=c.match(/d+/)[0].length,g=1===f||4===f||5===f?j-this.size*i:j-(this.size+this.size*i)),g},f.atIndex=function(a){var b=a+1,c=Math.floor(b/this.size);b=d.modulo(b,this.size);var e=this.array[b].toString(10),f="";if(c>0)for(var g=0;c>g;g+=1)f+="A";else if(0===c)f=3>b?"P":"M";else if(-1===c)f=3>b?"d":"m";else if(-1>c){for(var h=-1;h>c;h-=1)f+="d";f+=3>b?"d":""}return f+e},b.exports=f},{"../math/circle":8,"../math/modulo":9,"../regex/validation/interval_name":23}],18:[function(a,b){b.exports={b:-1,"#":1,x:2}},{}],19:[function(a,b){var c=a("../math/circle"),d=a("../math/modulo"),e=a("../convert/accidental_to_alter"),f=a("../regex/validation/note_name"),g=new c(["C","C#","D","Eb","E","F","F#","G","Ab","A","Bb","B"]);g.indexOf=function(a){var b=f(a).parse();if(!b)throw new Error("Invalid pitch name.");var c=e(b.accidental),g=this.array.indexOf(b.step);return null===b.octave?d.mod12(g+c):g+c+this.size*(b.octave+1)},g.atIndex=function(a){var b=Math.floor(a/this.size)-1,c=d.mod12(a);return this.array[c]+b.toString(10)},b.exports=g},{"../convert/accidental_to_alter":4,"../math/circle":8,"../math/modulo":9,"../regex/validation/note_name":24}],20:[function(a,b){b.exports=["C","D","E","F","G","A","B"]},{}],21:[function(a,b){b.exports=function(a,b){for(var c=[];b.test(a);){var d=a.match(b);c.push(d[0]),a=a.slice(d[0].length)}return c}},{}],22:[function(a,b){var c=a("./validation_factory"),d=function(){var a=/^/,b=/([A-G](?:b+|\#+|x+)?)/,d=/((?:maj|min|sus|aug|dim|mmaj|m|\-)?(?:\d+)?(?:\/\d+)?)?/,e=/((?:(?:add|sus)(?:\d+)|(?:sus|alt)|(?:\#|\+|b|\-)(?:\d+))*)/,f=/(\/)?/,g=/([A-G](?:b+|\#+|x+)?)?/,h=/$/,i=new RegExp(a.source+b.source+d.source+e.source+f.source+g.source+h.source);return c("chord",i,function(a){return{root:a[1],species:a[2]?a[2]:"",alterations:a[3]?a[3]:"",slash:a[4]?a[4]:"",bass:a[5]?a[5]:""}})}();b.exports=function(a){return d(a)}},{"./validation_factory":25}],23:[function(a,b){var c=a("./validation_factory"),d=function(){var a=/^(P|M|m|A+|d+)(\d+|U)$/;return c("interval",a,function(a){return{quality:a[1],size:parseInt(a[2],10)}})}();b.exports=function(a){return d(a)}},{"./validation_factory":25}],24:[function(a,b){var c=a("./validation_factory"),d=function(){var a=/^([A-G])(b+|\#+|x+)?(\-?[0-9]+)?$/;return c("note",a,function(a){return{step:a[1],accidental:a[2]?a[2]:"",octave:a[3]?parseInt(a[3],10):null}})}();b.exports=function(a){return d(a)}},{"./validation_factory":25}],25:[function(a,b){b.exports=function(a,b,c){return function(d){if("string"!=typeof d)throw new TypeError("Cannot validate "+a+". Input must be a string.");var e=function(){return d.match(b)?!0:!1};return{valid:e(),parse:function(){if(!e())return!1;var a=b.exec(d);return c(a)}}}}},{}],26:[function(a,b){function c(a,b,c){if("up"!==b&&"down"!==b)throw new Error('Transpose direction must be either "up" or "down".');var i=g(a).parse();if(!i)throw new Error("Invalid note name.");var j=h(c).parse();if(!j)throw new Error("Invalid interval name.");var k="up"===b?1:-1,l=e.atIndex(e.indexOf(i.step+i.accidental)+k*d.indexOf(c));if(null===i.octave)return l;var m=i.octave+k*Math.floor(j.size/8),n=j.size>7?j.size%7-1:j.size-1;return f.indexOf(i.step)+n>=7&&(m+=k),l+m.toString(10)}var d=a("../primitives/intervals"),e=a("../primitives/fifths"),f=a("../primitives/steps"),g=a("../regex/validation/note_name"),h=a("../regex/validation/interval_name");b.exports=c},{"../primitives/fifths":16,"../primitives/intervals":17,"../primitives/steps":20,"../regex/validation/interval_name":23,"../regex/validation/note_name":24}]},{},[10])(10)});